(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/custum_work_order/custum_work_order"],{1148:function(t,e,i){"use strict";i.r(e);var n=i("2528"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"24ce":function(t,e,i){},2528:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("ce40"));function a(t){return t&&t.__esModule?t:{default:t}}var r={onLoad:function(){var e=this;t.showLoading({title:"加载中"}),n.default.initWO().then(function(i){e.bkName=i.data.org,console.log(i.data),e.machinePickerArray=i.data.machinePicker,e.faultPickerArray=i.data.faultPicker,e.multiArray[0]=i.data.machinePicker,e.multiArray[1]=i.data.machinePicker[0].children,e.machineId=e.multiArray[1][0].value,e.orgId=i.data.orgId,t.hideLoading()})},data:function(){return{index:-1,imgList:[],bkName:"",multiArray:[],multiIndex:[0,0],machinePickerArray:[],faultPickerArray:[],flag:!1,machineId:"",faultId:"",description:"",person:"",phone:"",orgId:""}},methods:{ChooseImage:function(){var e=this;t.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){0!=e.imgList.length?e.imgList=e.imgList.concat(t.tempFilePaths):e.imgList=t.tempFilePaths}})},ViewImage:function(e){t.previewImage({urls:this.imgList,current:e.currentTarget.dataset.url})},DelImg:function(e){var i=this;t.showModal({title:"删除确认",content:"确定要删除这张图片吗？",cancelText:"取消",confirmText:"确认",success:function(t){t.confirm&&i.imgList.splice(e.currentTarget.dataset.index,1)}})},PickerChange:function(t){-1===t.detail.value?this.index=0:this.index=t.detail.value,this.faultId=this.faultPickerArray[this.index].value},MultiChange:function(t){this.multiIndex=t.detail.value,"99999"==this.multiArray[0][this.multiIndex[0]].value?this.machineId=this.multiArray[0][this.multiIndex[0]].value:this.machineId=this.multiArray[1][this.multiIndex[1]].value},MultiColumnChange:function(t){var e={multiArray:this.multiArray,multiIndex:this.multiIndex},i=e.multiArray[0].length;console.log("len:"+i),e.multiIndex[t.detail.column]=t.detail.value,5==e.multiIndex[0]&&(e.multiArray[1]=[],this.multiIndex.splice(1,0));for(var n=0;n<i;n++)if(e.multiIndex[0]==n){e.multiArray[1]=e.multiArray[0][n].children,this.multiIndex.splice(1,0);break}this.multiArray=e.multiArray,this.multiIndex=e.multiIndex},setDescription:function(t){this.description=t.detail.value},setPhone:function(t){this.phone=t.detail.value},setPerson:function(t){this.person=t.detail.value},createWO:function(){var e=this,i={machineId:this.machineId,faultId:this.faultId,person:this.person,phone:this.phone,description:this.description,orgId:this.orgId,imgPath:""};""!=i.person?""!=i.phone?""!=i.faultId?""!=i.description?(t.showLoading({title:"提交中"}),n.default.createWO(i,this.imgList).then(function(i){e.index=-1,e.imgList=[],e.multiIndex=[0,0],e.flag=!1,e.machineId="",e.faultId="",e.description="",e.person="",e.phone="",t.hideLoading(),200==i.code?t.showModal({title:"提交成功",content:"你已完成报修工单的提交！",showCancel:!1,confirmText:"完成",success:function(){t.hideLoading(),t.reLaunch({url:"/pages/his_wo/his_wo"})}}):wx.showToast({icon:"none",title:"提交失败",mask:!0,duration:2e3})})):t.showToast({title:"请输入问题描述",icon:"none"}):t.showToast({title:"请选择故障类型",icon:"none"}):t.showToast({title:"请输入联系方式",icon:"none"}):t.showToast({title:"请输入姓名",icon:"none"})}}};e.default=r}).call(this,i("543d")["default"])},"4abd":function(t,e,i){"use strict";(function(t){i("fe98"),i("921b");n(i("66fd"));var e=n(i("612d"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"612d":function(t,e,i){"use strict";i.r(e);var n=i("7923"),a=i("1148");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("fd8a");var o,u=i("f0c5"),l=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=l.exports},7923:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.faultPickerArray.map(function(t){return t.label}));t.$mp.data=Object.assign({},{$root:{g0:i}})},r=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return n})},fd8a:function(t,e,i){"use strict";var n=i("24ce"),a=i.n(n);a.a}},[["4abd","common/runtime","common/vendor"]]]);