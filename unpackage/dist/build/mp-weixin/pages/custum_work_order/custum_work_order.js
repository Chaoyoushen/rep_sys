(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/custum_work_order/custum_work_order"],{"017c":function(t,i,e){},"24d9":function(t,i,e){"use strict";var n=e("017c"),a=e.n(n);a.a},"2dce":function(t,i,e){"use strict";var n,a=function(){var t=this,i=t.$createElement,e=(t._self._c,t.faultPickerArray.map(function(t){return t.label}));t.$mp.data=Object.assign({},{$root:{g0:e}})},r=[];e.d(i,"b",function(){return a}),e.d(i,"c",function(){return r}),e.d(i,"a",function(){return n})},"364a":function(t,i,e){"use strict";e.r(i);var n=e("f478"),a=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);i["default"]=a.a},bfa2:function(t,i,e){"use strict";(function(t){e("42e8"),e("921b");n(e("66fd"));var i=n(e("d64b"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},d64b:function(t,i,e){"use strict";e.r(i);var n=e("2dce"),a=e("364a");for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);e("24d9");var o,u=e("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);i["default"]=c.exports},f478:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("8965"));function a(t){return t&&t.__esModule?t:{default:t}}var r={onLoad:function(){var i=this;t.showLoading({title:"加载中"}),n.default.initWO().then(function(e){i.bkName=e.data.org,console.log(e.data),i.machinePickerArray=e.data.machinePicker,i.faultPickerArray=e.data.faultPicker,i.multiArray[0]=e.data.machinePicker,i.multiArray[1]=e.data.machinePicker[0].children,i.machineId=i.multiArray[1][0].value,i.orgId=e.data.orgId,t.hideLoading()})},data:function(){return{index:-1,imgList:[],bkName:"",multiArray:[],multiIndex:[0,0],machinePickerArray:[],faultPickerArray:[],flag:!1,machineId:"",faultId:"",description:"",person:"",phone:"",orgId:""}},methods:{ChooseImage:function(){var i=this;t.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){0!=i.imgList.length?i.imgList=i.imgList.concat(t.tempFilePaths):i.imgList=t.tempFilePaths}})},ViewImage:function(i){t.previewImage({urls:this.imgList,current:i.currentTarget.dataset.url})},DelImg:function(i){var e=this;t.showModal({title:"删除确认",content:"确定要删除这张图片吗？",cancelText:"取消",confirmText:"确认",success:function(t){t.confirm&&e.imgList.splice(i.currentTarget.dataset.index,1)}})},PickerChange:function(t){-1===t.detail.value?this.index=0:this.index=t.detail.value,this.faultId=this.faultPickerArray[this.index].value},MultiChange:function(t){this.multiIndex=t.detail.value,"99999"==this.multiArray[0][this.multiIndex[0]].value?this.machineId=this.multiArray[0][this.multiIndex[0]].value:this.machineId=this.multiArray[1][this.multiIndex[1]].value},MultiColumnChange:function(t){var i={multiArray:this.multiArray,multiIndex:this.multiIndex},e=i.multiArray[0].length;console.log("len:"+e),i.multiIndex[t.detail.column]=t.detail.value,5==i.multiIndex[0]&&(i.multiArray[1]=[],this.multiIndex.splice(1,0));for(var n=0;n<e;n++)if(i.multiIndex[0]==n){i.multiArray[1]=i.multiArray[0][n].children,this.multiIndex.splice(1,0);break}this.multiArray=i.multiArray,this.multiIndex=i.multiIndex},setDescription:function(t){this.description=t.detail.value},setPhone:function(t){this.phone=t.detail.value},setPerson:function(t){this.person=t.detail.value},createWO:function(){var i=this,e={machineId:this.machineId,faultId:this.faultId,person:this.person,phone:this.phone,description:this.description,orgId:this.orgId,imgPath:""};""!=e.person?""!=e.phone?""!=e.faultId?""!=e.description?(t.showLoading({title:"提交中"}),n.default.createWO(e,this.imgList).then(function(e){i.index=-1,i.imgList=[],i.multiIndex=[0,0],i.flag=!1,i.machineId="",i.faultId="",i.description="",i.person="",i.phone="",t.hideLoading(),200==e.code?t.showModal({title:"提交成功",content:"你已完成报修工单的提交！",showCancel:!1,confirmText:"完成",success:function(){t.hideLoading(),t.reLaunch({url:"/pages/his_wo/his_wo"})}}):wx.showToast({icon:"none",title:"提交失败",mask:!0,duration:2e3})})):t.showToast({title:"请输入问题描述",icon:"none"}):t.showToast({title:"请选择故障类型",icon:"none"}):t.showToast({title:"请输入联系方式",icon:"none"}):t.showToast({title:"请输入姓名",icon:"none"})}}};i.default=r}).call(this,e("543d")["default"])}},[["bfa2","common/runtime","common/vendor"]]]);