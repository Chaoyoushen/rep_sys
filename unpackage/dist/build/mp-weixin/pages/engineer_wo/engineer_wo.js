(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/engineer_wo/engineer_wo"],{5548:function(e,t,n){"use strict";n.r(t);var i=n("be7e"),a=n("a903");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("ac94");var o,u=n("f0c5"),l=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=l.exports},"843d":function(e,t,n){"use strict";(function(e){n("42e8"),n("921b");i(n("66fd"));var t=i(n("5548"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},a903:function(e,t,n){"use strict";n.r(t);var i=n("cb72"),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=a.a},ac94:function(e,t,n){"use strict";var i=n("e675"),a=n.n(i);a.a},be7e:function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.faultPickerArray.map(function(e){return e.label}));e.$mp.data=Object.assign({},{$root:{g0:n}})},r=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i})},cb72:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("8965"));function a(e){return e&&e.__esModule?e:{default:e}}var r={onLoad:function(t){var n=this;i.default.getWOInfo(t.orderId).then(function(e){console.log(e),n.orderId=t.orderId,n.person=e.data.person,n.phone=e.data.phone,n.br=e.data.br,n.fault=e.data.fault,n.machine=e.data.machine,n.sts=e.data.wosts;var i=e.data.images.split(";");if(""!==i[0]){var a=[];for(var r in i){var o=i[r];a.push(o)}n.images=a}}),i.default.initWO().then(function(t){n.bkName=t.data.org,console.log(t.data),n.machinePickerArray=t.data.machinePicker,n.faultPickerArray=t.data.faultPicker,n.multiArray[0]=t.data.machinePicker,n.multiArray[1]=t.data.machinePicker[0].children,n.machineId=n.multiArray[1][0].value,n.orgId=t.data.orgId,e.hideLoading()})},data:function(){return{orderId:"",person:"",phone:"",fault:"",machine:"",br:"",sts:"",operationInfo:"",images:[],index:-1,imgList:[],bkName:"",multiArray:[],multiIndex:[0,0],machinePickerArray:[],faultPickerArray:[],flag:!1,machineId:"",faultId:"",description:"",orgId:""}},methods:{PickerChange:function(e){-1===e.detail.value?this.index=0:this.index=e.detail.value,this.faultId=this.faultPickerArray[this.index].value},MultiChange:function(e){this.multiIndex=e.detail.value,"99999"==this.multiArray[0][this.multiIndex[0]].value?this.machineId=this.multiArray[0][this.multiIndex[0]].value:this.machineId=this.multiArray[1][this.multiIndex[1]].value},MultiColumnChange:function(e){var t={multiArray:this.multiArray,multiIndex:this.multiIndex},n=t.multiArray[0].length;console.log("len:"+n),t.multiIndex[e.detail.column]=e.detail.value,5==t.multiIndex[0]&&(t.multiArray[1]=[],this.multiIndex.splice(1,0));for(var i=0;i<n;i++)if(t.multiIndex[0]==i){t.multiArray[1]=t.multiArray[0][i].children,this.multiIndex.splice(1,0);break}this.multiArray=t.multiArray,this.multiIndex=t.multiIndex},setOperationInfo:function(e){this.operationInfo=e.detail.value},onImageTouch:function(t){e.previewImage({current:t,urls:this.images})},upOperation:function(){var t={orderId:this.orderId,person:this.person,operationInfo:this.operationInfo,machineId:this.machineId,faultId:this.faultId};console.log(t),""!=t.operationInfo?""!=t.faultId?(e.showLoading({title:"提交中"}),i.default.uploadOperation(t).then(function(t){e.hideLoading(),200==t.code?e.showModal({title:"提交成功",content:"你已完成提交！",showCancel:!1,confirmText:"完成",success:function(){e.hideLoading(),e.reLaunch({url:"/pages/engineer/engineer"})}}):wx.showToast({icon:"none",title:"提交失败",mask:!0,duration:2e3})})):e.showToast({title:"请选择故障类型",icon:"none"}):e.showToast({title:"请输入理由",icon:"none"})},acceptNowWO:function(t){e.showLoading({title:"接受中"}),i.default.acceptWO(t).then(function(t){e.hideLoading(),e.showToast({icon:"success",mask:!0,title:"接受工单成功",duration:1e3}),setTimeout(function(){e.reLaunch({url:"/pages/engineer/engineer"})},1e3)})},goWODetail:function(t){e.navigateTo({url:"/pages/operation_his/operation_his?orderId="+t})},intoChangePerson:function(t){e.navigateTo({url:"/pages/query_nextperson/query_nextperson?orderId="+t})}}};t.default=r}).call(this,n("543d")["default"])},e675:function(e,t,n){}},[["843d","common/runtime","common/vendor"]]]);